# AMM

自动化做市商 (Automatic Market Maker)，使用算法和智能合约来促进数字资产的买卖。
通过提供流动性池，允许用户直接与池进行买卖，而不是匹配买卖双方。

## 流动性池

- 拥有两种资产对（如: SOL/USDC）的储备
- 通过某种算法来决定兑换率
- 交易者与池子通过一种代币兑换另一种代币，而不是与个人

## 恒定乘积公式

大多数AMM对流动性池的汇率算法，核心是一个恒定乘积公式
`x*y = K`
- x 是代币 A 的储备量
- y 是代币 B 的储备量
- k 是一个常数，用于锁定总流动性
![[DeFi核心概念 2026-01-08 13.02.27.excalidraw]]

当你向池子中添加一种代币 A 时，为了维持 K 不变，必须减少 B 的代币。

举例：
在 SOL/USDT 流动性池中，当前：
- SOL = 10
- USDT = 2000
K = 10 * 2000 = 20000
现在使用 USDT 在该流动性池中兑换(买) 1SOL。也就是要让 SOL 减少1，为了保持 K 不变那么USDT 应该增加：

20000/9 = 2222.222

那么你需要付出：2222.222 - 2000 = 222.22 USDT

在交易之前 1SOL = 200USDT，实际交易是却在 222.22 这个价格成交。
222.22 - 200 = 22.22 这个差价就是滑点。

## 滑点

滑点是交易的预期价格与实际价格之间的差额。
因为价格会在你的交易期间发生变化，所以一定会产生滑点。

## 滑点公式

对于规模为 x 和 y 的池子中，Δx 代币的兑换，滑点近似为：

slippage = Δx / (x + Δx)

## 无常损失

